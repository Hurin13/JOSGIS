{% extends 'base.html' %}
{% block title %}Manage Farms{% endblock %}

{% block content %}
<div class="section-header">
  <h2>ğŸŒ± Manage Farms</h2>
  <p>Manage your orange plantation land data</p>
</div>

<div class="btn-group" style="margin-bottom: 2rem;">
  <a href="{{ url_for('lahan.tambah_lahan') }}" class="btn btn-primary">
    â• Add New Farm
  </a>
  <a href="{{ url_for('dashboard.dashboard') }}" class="btn btn-secondary">
    â† Back to Dashboard
  </a>
</div>

<div class="card">
  <h3>ğŸ“Š Your Farm List</h3>

  {% if daftar_lahan %}
    <ul class="lahan-list">
      {% for lahan in daftar_lahan %}
        <li class="lahan-item">
          <h4>ğŸŒ¿ {{ lahan.nama_lahan }}</h4>
          <div class="form-grid">
            <div class="form-group">
              <label>ğŸ“ Area:</label>
              <span>{{ lahan.luas_lahan | round(2) }} ha</span>
            </div>
            <div class="form-group">
              <label>ğŸ“… Planting Year:</label>
              <span>{{ lahan.tahun_tanam }}</span>
            </div>
            <div class="form-group">
              <label>ğŸŒ± Orange Variety:</label>
              <span>{{ lahan.varietas_kakao }}</span>
            </div>
          </div>

          {% if lahan.bukti_luas_sertifikat %}
            <p style="margin: 1rem 0;">
              <a href="{{ url_for('static', filename='uploads/sertifikat/' + lahan.bukti_luas_sertifikat.replace('\\', '/').split('/')[-1]) }}" target="_blank" style="color: var(--cocoa-brown); font-weight: 600;">
                ğŸ“„ View Certificate
              </a>
            </p>
          {% endif %}

          <div class="lahan-actions">
            <a href="{{ url_for('lahan.detail_lahan', id_lahan=lahan.id_lahan) }}">ğŸ“„ Farm Details</a>
            <a href="{{ url_for('lahan.edit_lahan', id_lahan=lahan.id_lahan) }}">âœï¸ Edit</a>
            <a href="{{ url_for('lahan.hapus_lahan', id_lahan=lahan.id_lahan) }}" onclick="return confirm('Are you sure you want to delete this farm?')" style="background: #dc3545;">ğŸ—‘ï¸ Delete</a>
          </div>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <div style="text-align: center; padding: 3rem; color: #666;">
      <h4>ğŸŒ± No Farms Yet</h4>
      <p>Please add a farm first to start recording your orange plantation.</p>
      <a href="{{ url_for('lahan.tambah_lahan') }}" class="btn btn-primary" style="margin-top: 1rem;">
        â• Add First Farm
      </a>
    </div>
  {% endif %}
</div>
{% endblock %}
